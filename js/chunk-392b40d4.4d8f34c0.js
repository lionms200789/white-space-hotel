(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-392b40d4"],{"1dde":function(t,e,a){var i=a("d039"),o=a("b622"),n=a("2d00"),s=o("species");t.exports=function(t){return n>=51||!i((function(){var e=[],a=e.constructor={};return a[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"33e6":function(t,e,a){t.exports=a.p+"img/success.5e18caa0.svg"},"388a":function(t,e,a){"use strict";var i=a("a8d6"),o=a.n(i);o.a},"39d6":function(t,e,a){t.exports=a.p+"img/logo_block.d4ac2160.svg"},"45fc":function(t,e,a){"use strict";var i=a("23e7"),o=a("b727").some,n=a("a640"),s=a("ae40"),r=n("some"),c=s("some");i({target:"Array",proto:!0,forced:!r||!c},{some:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"4de4":function(t,e,a){"use strict";var i=a("23e7"),o=a("b727").filter,n=a("1dde"),s=a("ae40"),r=n("filter"),c=s("filter");i({target:"Array",proto:!0,forced:!r||!c},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,e,a){var i=a("861d"),o=a("e8b5"),n=a("b622"),s=n("species");t.exports=function(t,e){var a;return o(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?i(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"6df8":function(t,e,a){t.exports=a.p+"img/wifi.7e9c444b.svg"},7042:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"fade"}},[t.lightBoxControl?i("div",{staticClass:"flex-rsac",attrs:{id:"lightbox"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.lightBoxControl=!t.lightBoxControl}}},[i("i",{staticClass:"fa fa-3x fa-chevron-left arrow",on:{click:function(e){return t.indexControl(-1)}}}),i("div",{staticClass:"lightbox-view flex-rcc"},t._l(t.roomDetail.imageUrl,(function(e,a){return i("img",{key:a,staticClass:"lightbox-img",class:{active:t.lightBoxIndex===a},attrs:{src:e}})})),0),i("i",{staticClass:"fa fa-3x fa-chevron-right arrow",on:{click:function(e){return t.indexControl(1)}}})]):t._e()]),i("div",{staticClass:"room-gallery"},[i("router-link",{attrs:{to:"/"}},[i("img",{staticClass:"logo-block",attrs:{src:a("39d6")}})]),i("div",{staticClass:"room-left",style:{"background-image":"url("+t.roomDetail.imageUrl[0]+")"},on:{click:function(e){return t.showLightBox(0)}}}),i("div",{staticClass:"room-right"},[i("div",{style:{"background-image":"url("+t.roomDetail.imageUrl[1]+")"},on:{click:function(e){return t.showLightBox(1)}}}),i("div",{style:{"background-image":"url("+t.roomDetail.imageUrl[2]+")"},on:{click:function(e){return t.showLightBox(2)}}})])],1),i("div",{staticClass:"room-container flex-rsbs"},[i("div",{staticClass:"room-info"},[i("h5",{staticClass:"room-type"},[t._v(t._s(t.roomDetail.name))]),i("p",[t._v("房客人數限制: "+t._s(t.roomDetail.descriptionShort.GuestMin)+" ~ "+t._s(t.roomDetail.descriptionShort.GuestMax)+"人")]),t.roomDetail.descriptionShort.Bed?i("p",[t._v("床型: "+t._s(t.roomDetail.descriptionShort.Bed[0]))]):t._e(),i("p",[t._v("衛浴數量: "+t._s(t.roomDetail.descriptionShort["Private-Bath"])+"間")]),i("p",[t._v("房間大小: "+t._s(t.roomDetail.descriptionShort.Footage)+"平方公尺")]),i("p",{staticClass:"description"},[t._v(t._s(t.roomDetail.description))]),t.roomDetail.checkInAndOut?i("div",{staticClass:"check-date flex-rsbc"},[i("div",{staticClass:"check-in flex-ccl"},[i("span",[t._v("Check In")]),i("span",{staticClass:"check-in-time"},[t._v(t._s(t.roomDetail.checkInAndOut.checkInEarly)+" ~ "+t._s(t.roomDetail.checkInAndOut.checkInLate))])]),i("div",{staticClass:"check-out flex-ccl"},[i("span",[t._v("Check Out")]),i("span",{staticClass:"check-out-time"},[t._v(t._s(t.roomDetail.checkInAndOut.checkOut))])])]):t._e(),t.roomDetail.amenities?i("div",{staticClass:"room-amenities"},[i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Wi-Fi"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("6df8")}}),i("span",[t._v("Wi-Fi")])]),t._m(0),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Great-View"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("d437")}}),i("span",[t._v("漂亮的視野")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Breakfast"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("c735")}}),i("span",[t._v("早餐")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Air-Conditioner"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("af67")}}),i("span",[t._v("空調")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Smoke-Free"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("bdc4")}}),i("span",[t._v("禁止吸菸")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Refrigerator"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("ccd0")}}),i("span",[t._v("冰箱")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Mini-Bar"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("b4c6")}}),i("span",[t._v("Mini Bar")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Child-Friendly"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("8ec8")}}),i("span",[t._v("適合兒童")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Room-Service"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("ee28")}}),i("span",[t._v("Room Service")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Sofa"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("df66")}}),i("span",[t._v("沙發")])]),i("div",{staticClass:"amenity",class:{disable:!t.roomDetail.amenities["Pet-Friendly"]}},[i("img",{staticClass:"info-icon",attrs:{src:a("8205")}}),i("span",[t._v("攜帶寵物")])])]):t._e()]),i("div",{staticClass:"room-booking flex-rrs"},[i("div",{staticClass:"room-price flex-ccr"},[i("span",[t._v("NT."+t._s(t.roomDetail.normalDayPrice))]),i("span",[t._v("平日(一~四)")]),i("span",[t._v("NT."+t._s(t.roomDetail.holidayPrice))]),i("span",[t._v("假日(五~日)")])]),i("div",{staticClass:"date-wrapper"},[i("DatePicker",{attrs:{reserved:t.booking}}),i("div",{staticClass:"button-group flex-rsac"},[i("button",{staticClass:"reserve txt-c",on:{click:function(e){t.popup=!0}}},[t._v("預約時段")]),i("button",{staticClass:"del-reserve txt-c",on:{click:t.delReservation}},[t._v("清除所有預約")])])],1)])]),i("BookingDialog",{attrs:{popup:t.popup,id:t.roomId,detail:t.roomDetail,reserved:t.booking},on:{popUpHandler:function(e){t.popup=!1},updateRoom:t.getRoomInfo}})],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"amenity"},[i("img",{staticClass:"info-icon",attrs:{src:a("ae06")}}),i("span",[t._v("電話")])])}],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[t.popup?a("div",{staticClass:"cover",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopUp(e)}}},[t.popup?a("div",{staticClass:"booking-dialog"},[a("span",{staticClass:"booking-title"},[t._v("預約時段")]),a("div",{staticClass:"booking-form"},[a("div",{staticClass:"booking-name"},[a("label",{attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.bookinfo.name,expression:"bookinfo.name"}],attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入完整大名",required:""},domProps:{value:t.bookinfo.name},on:{input:function(e){e.target.composing||t.$set(t.bookinfo,"name",e.target.value)}}})]),a("div",{staticClass:"booking-tel"},[a("label",{attrs:{for:"text"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.bookinfo.tel,expression:"bookinfo.tel",modifiers:{number:!0}}],attrs:{type:"text",name:"phone",required:"",id:"tel",placeholder:"0927001346"},domProps:{value:t.bookinfo.tel},on:{input:function(e){e.target.composing||t.$set(t.bookinfo,"tel",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"booking-date"},[a("label",{attrs:{for:"date"}},[t._v("日期")]),a("vc-date-picker",{staticStyle:{flex:"1 0 auto"},attrs:{mode:"range","min-date":t.calMinDate},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.inputProps,o=e.inputEvents;return a("input",t._g(t._b({attrs:{type:"text",id:"date",placeholder:"選擇您的預約起訖",required:""}},"input",i,!1),o))}}],null,!1,3933054225),model:{value:t.range,callback:function(e){t.range=e},expression:"range"}})],1)]),a("div",{staticClass:"count-day"},[a("div",{staticClass:"normal-day flex-rsbc"},[a("span",[t._v("平日時段")]),a("span",[t._v(t._s(t.countWeekdays.length)+"夜")])]),a("div",{staticClass:"holiday flex-rsbc"},[a("span",[t._v("假日時段")]),a("span",[t._v(t._s(t.countHolidays.length)+"夜")])])]),a("p",{staticClass:"total"},[t._v("NT. "+t._s(t.detail.normalDayPrice*t.countWeekdays.length+t.detail.holidayPrice*t.countHolidays.length))]),a("div",{staticClass:"booking-confirm flex-rsbc"},[a("input",{staticClass:"cancel",attrs:{type:"button",value:"取消"},on:{click:t.closePopUp}}),a("input",{staticClass:"confirm",attrs:{type:"submit",value:"確認預約"},on:{click:t.booking}})])]):t._e(),a("BookingResult",{attrs:{status:t.status}})],1):t._e()])},s=[],r=(a("99af"),a("4de4"),a("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showResultModal?i("div",{staticClass:"result-modal flex-csbl"},[i("span",{staticClass:"result-title"},[t._v(t._s(t.status))]),i("loading",{attrs:{active:"預約中"===this.status,"is-full-page":!1,width:35,"background-color":"transparent",loader:"dots"},on:{"update:active":function(e){return t.$set(this,"status === '預約中'",e)}}}),"預約成功"===t.status?i("img",{staticClass:"result-icon",attrs:{src:a("33e6")}}):t._e(),"預約失敗"===t.status?i("i",{staticClass:"fa fa-times-circle fa-3x result-icon"}):t._e(),i("router-link",{staticClass:"result-btn",class:{disabled:"預約中"===this.status},attrs:{to:"/"}},[t._v("回首頁")])],1):t._e()}),c=[],l={props:["status"],data:function(){return{showResultModal:!1}},created:function(){var t=this;this.$bus.$on("popUpResultModal",(function(){t.showResultModal=!0}))}},u=l,d=(a("388a"),a("2877")),f=Object(d["a"])(u,r,c,!1,null,"caebb8f8",null),h=f.exports,m={props:["popup","id","detail"],components:{BookingResult:h},data:function(){return{bookinfo:{name:"",tel:"",date:[]},range:{start:null,end:null},status:"預約中"}},computed:{countHolidays:function(){var t=this.bookinfo.date.filter((function(t){var e=new Date(t).getDay();return 6===e||0===e||5===e}));return t},countWeekdays:function(){var t=this.bookinfo.date.filter((function(t){var e=new Date(t).getDay();return 6!==e&&0!==e&&5!==e}));return t},calMinDate:function(){var t=new Date;return t.setDate(t.getDay()+1),t}},methods:{closePopUp:function(){this.$emit("popUpHandler")},booking:function(){var t=this;this.bookinfo.name&&this.bookinfo.tel&&this.bookinfo.date?(this.$bus.$emit("popUpResultModal"),this.$http.post("https://challenge.thef2e.com/api/thef2e2019/stage6/room/".concat(this.id),this.bookinfo,{headers:{Authorization:"Bearer fjvgAkJM7GUZwUIVZvktJmICowRuZMD5i8LUgZ39oo0c9s1ys4eO9rX0dA9E",accept:"application/json"}}).then((function(e){t.bookinfo={date:[],name:"",tel:""},t.status="預約成功",t.range={},t.$emit("updateRoom")})).catch((function(e){t.status="預約失敗"}))):alert("請確認欄位皆填妥")},convertMth:function(t){return t<10?"0".concat(t):t}},watch:{range:function(){if(this.bookinfo.date=[],this.range)for(var t=this.range.start,e=this.range.end,a=new Date(t),i=a;i<=e;i.setDate(i.getDate()+1))this.bookinfo.date.push("".concat(a.getFullYear(),"-").concat(this.convertMth(a.getMonth()+1),"-").concat(this.convertMth(a.getDate())))}}},v=m,p=Object(d["a"])(v,n,s,!1,null,null,null),g=p.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"date-picker"},[a("div",{staticClass:"date-header flex-rsbc"},[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.adjustMonth(-1)}}},[a("i",{staticClass:"fa fa-chevron-left"})]),a("div",{staticClass:"date-title"},[t._v(t._s(t.calendar.year)+" / "+t._s(t.calendar.month+1)+"月")]),a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.adjustMonth(1)}}},[a("i",{staticClass:"fa fa-chevron-right"})])]),a("div",{staticClass:"date-body"},[t._m(0),t._l(5,(function(e){return a("div",{key:e,staticClass:"week flex-rsbc"},t._l(7,(function(i){return a("div",{key:i,staticClass:"dates txt-c",class:[t.disableOtherMth(t.getCalendarMth(e,i)),t.checkReserved(t.getCalendarMth(e,i))]},[t._v(t._s(t.showCalendarDates[7*(e-1)+(i-1)].date))])})),0)}))],2)])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weekday flex-rsbc txt-c"},[a("div",[t._v("日")]),a("div",[t._v("一")]),a("div",[t._v("二")]),a("div",[t._v("三")]),a("div",[t._v("四")]),a("div",[t._v("五")]),a("div",[t._v("六")])])}],k=(a("45fc"),{props:["reserved"],data:function(){return{calendar:{year:"",month:"",date:"",day:""}}},methods:{getCurrentDate:function(){var t=new Date;this.calendar.year=t.getFullYear(),this.calendar.month=t.getMonth(),this.calendar.date=t.getDate(),this.calendar.day=t.getDay()},adjustMonth:function(t){this.calendar.month+=t,this.calendar.month<0?(this.calendar.month=11,this.calendar.year+=t):this.calendar.month>11&&(this.calendar.month=0,this.calendar.year+=t)},getCalendarMth:function(t,e){return this.showCalendarDates[7*(t-1)+(e-1)]},disableOtherMth:function(t){return{disOtherMth:t.month!==this.calendar.month}},checkReserved:function(t){var e=this;return{booked:this.reserved.some((function(a){return a.date===e.formatDate(t)}))}},formatDate:function(t){var e=t.year,a=t.month<10?"0".concat(t.month+1):t.month+1,i=t.date<10?"0".concat(t.date):t.date;return"".concat(e,"-").concat(a,"-").concat(i)}},computed:{firstDateOfPane:function(){var t=new Date(this.calendar.year,this.calendar.month,1).getDay(),e=new Date(this.calendar.year,this.calendar.month,1-t);return{year:e.getFullYear(),month:e.getMonth(),date:e.getDate(),day:e.getDay()}},showCalendarDates:function(){for(var t,e=[],a=0;a<35;a++){t=new Date(this.firstDateOfPane.year,this.firstDateOfPane.month,this.firstDateOfPane.date+a);var i={year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),day:t.getDay()};e.push(i)}return e}},mounted:function(){this.getCurrentDate()}}),_=k,x=Object(d["a"])(_,b,C,!1,null,null,null),y=x.exports,D={components:{BookingDialog:g,DatePicker:y},data:function(){return{roomId:"",roomDetail:{descriptionShort:{},imageUrl:[]},booking:[],popup:!1,lightBoxIndex:0,lightBoxControl:!1}},methods:{delReservation:function(){var t=this;this.$http.delete("https://challenge.thef2e.com/api/thef2e2019/stage6/rooms",{headers:{Authorization:"Bearer fjvgAkJM7GUZwUIVZvktJmICowRuZMD5i8LUgZ39oo0c9s1ys4eO9rX0dA9E",accept:"application/json"}}).then((function(e){t.getRoomInfo(),alert("已清除預約紀錄")}))},getRoomInfo:function(){var t=this;this.roomId=this.$route.params.id,this.$http.get("https://challenge.thef2e.com/api/thef2e2019/stage6/room/".concat(this.roomId),{headers:{Authorization:"Bearer fjvgAkJM7GUZwUIVZvktJmICowRuZMD5i8LUgZ39oo0c9s1ys4eO9rX0dA9E",accept:"application/json"}}).then((function(e){t.roomDetail=e.data.room[0],t.booking=e.data.booking}))},showLightBox:function(t){this.lightBoxControl=!0,this.lightBoxIndex=t},indexControl:function(t){this.lightBoxIndex+=t;var e=this.roomDetail.imageUrl.length;this.lightBoxIndex>e-1?this.lightBoxIndex=0:this.lightBoxIndex<0&&(this.lightBoxIndex=e-1)}},mounted:function(){this.getRoomInfo()}},w=D,M=Object(d["a"])(w,i,o,!1,null,null,null);e["default"]=M.exports},8205:function(t,e,a){t.exports=a.p+"img/dog.6a06afa1.svg"},8418:function(t,e,a){"use strict";var i=a("c04e"),o=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var s=i(e);s in t?o.f(t,s,n(0,a)):t[s]=a}},"8ec8":function(t,e,a){t.exports=a.p+"img/crawling-baby-silhouette.c76c9ad5.svg"},"99af":function(t,e,a){"use strict";var i=a("23e7"),o=a("d039"),n=a("e8b5"),s=a("861d"),r=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),f=a("b622"),h=a("2d00"),m=f("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",g=h>=51||!o((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),b=d("concat"),C=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:n(t)},k=!g||!b;i({target:"Array",proto:!0,forced:k},{concat:function(t){var e,a,i,o,n,s=r(this),d=u(s,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?s:arguments[e],C(n)){if(o=c(n.length),f+o>v)throw TypeError(p);for(a=0;a<o;a++,f++)a in n&&l(d,f,n[a])}else{if(f>=v)throw TypeError(p);l(d,f++,n)}return d.length=f,d}})},a640:function(t,e,a){"use strict";var i=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&i((function(){a.call(null,e||function(){throw 1},1)}))}},a8d6:function(t,e,a){},ae06:function(t,e,a){t.exports=a.p+"img/phone.16543ec9.svg"},ae40:function(t,e,a){var i=a("83ab"),o=a("d039"),n=a("5135"),s=Object.defineProperty,r={},c=function(t){throw t};t.exports=function(t,e){if(n(r,t))return r[t];e||(e={});var a=[][t],l=!!n(e,"ACCESSORS")&&e.ACCESSORS,u=n(e,0)?e[0]:c,d=n(e,1)?e[1]:void 0;return r[t]=!!a&&!o((function(){if(l&&!i)return!0;var t={length:-1};l?s(t,1,{enumerable:!0,get:c}):t[1]=1,a.call(t,u,d)}))}},af67:function(t,e,a){t.exports=a.p+"img/breeze.410d1c42.svg"},b0c0:function(t,e,a){var i=a("83ab"),o=a("9bf2").f,n=Function.prototype,s=n.toString,r=/^\s*function ([^ (]*)/,c="name";i&&!(c in n)&&o(n,c,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(t){return""}}})},b4c6:function(t,e,a){t.exports=a.p+"img/refrige.9c2d47ee.svg"},b727:function(t,e,a){var i=a("0366"),o=a("44ad"),n=a("7b0b"),s=a("50c4"),r=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d;return function(h,m,v,p){for(var g,b,C=n(h),k=o(C),_=i(m,v,3),x=s(k.length),y=0,D=p||r,w=e?D(h,x):a?D(h,0):void 0;x>y;y++)if((f||y in k)&&(g=k[y],b=_(g,y,C),t))if(e)w[y]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return y;case 2:c.call(w,g)}else if(u)return!1;return d?-1:l||u?u:w}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},bdc4:function(t,e,a){t.exports=a.p+"img/no-smoke-symbol.74436c49.svg"},c735:function(t,e,a){t.exports=a.p+"img/breakfast.c4c2c972.svg"},ccd0:function(t,e,a){t.exports=a.p+"img/bar.92950803.svg"},d437:function(t,e,a){t.exports=a.p+"img/mountain-range.ad2b689a.svg"},df66:function(t,e,a){t.exports=a.p+"img/sofa.e2a55e69.svg"},e8b5:function(t,e,a){var i=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}},ee28:function(t,e,a){t.exports=a.p+"img/room_service.ef31df00.svg"}}]);
//# sourceMappingURL=chunk-392b40d4.4d8f34c0.js.map